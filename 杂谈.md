## 杂谈

关于Java、MySql、中间件的一些总结。欢迎补充

技术本质是相通的，你所看到的很多解决方案，其实本质是相通的。故引出此文。
## Java队列链表杂谈
### 基本数据结构

复杂的集合类都是基本数据结构的组合，所以他们的特性都是由基本数据结构决定的。

换言之， 通过基本数据结构我们能够推断出复杂数据结构的特性、缺陷。至于线程安全还是非安全的无非是加锁或者不加锁。具体怎么加锁哪里加这个需要我们深究。

#### 数组：

根据其大小分配连续的内存空间。过大会报内存空间不足（没有一个连续的内存空间满足），初始化失败。

底层是数组的如ArrayList等使用感知上是无限扩充的，但是每一次扩充都会存在旧的数组copy到新的数组之中，所以效率慢。但是寻址快（内存连续的好处）。插入删除需要移动各自位上的数据。比较麻烦。效率低下。


#### 链表：
每个node都会分配内存空间。所以理论上是可以无限扩容。前提内存空间足够。
双向链表一样的道理，无非是增加两个指针，指向前后。

查找需要遍历，插入，删除、添加方便。

#### 栈：
栈一般来讲也是给你分配一块连续的内存，大小在你初始化的时候OK。如果需要扩容，那么无非就是复制一遍，当然你也可以写的再花骚一点，数组与链表的合体，链表的节点是一个数组，数组超出之后扩容原本的数组节点头指针指向你的新的申请的数组。出栈改数组上的位置的值致为null。为了避免底层是数组而导致你需要频繁的移动元素，那么第一个元素可以置于数组尾部，第二个n-2。
具体实现不限，但是需要记住他的特性就是先进后出。结合递归理解就OK

#### 树：

由其数据结构推断其应用
String、StringBuffer与StringBuilder
队列数组链表、线程安全/非线程安全
#### 并发包下的dq，abq

#### 分段锁
CurrentHashMap、LongAdder
## mysql的线程隔离级别
结合Java内存模型来讲，两者道理是一样的
## 共识算法（选举制度）杂谈
Raft算法的两种应用（redis以及zk）

Raft阶段主要分为两个，首先是leader选举过程，然后在选举出来的leader基础上进行正常操作，比如日志复制、记账等。
## 主从复制杂谈
无论是mysql还是redis亦或者其他。主从复制之间都存在两个问题需要深思。时效性 Or 性能。Redis还额外牵扯到一个持久化，但是道理是一样的。
## 限流杂谈

## 控制台数据推送杂谈
dubbo，sentinel
## 负载均衡杂谈
Nginx dubbo 

## 平均值的错觉

数理统计中为什么不要用平均值作为参考。以及可能暴露出的问题。

首先一点，平均值是可以作为在系统运行一段时间后的健康状况的大概体现，但是只相信平均值是很危险的。
很多肉眼不可见的危险其实就隐藏在这些数据中，浑水摸鱼。造成一种你的系统很OK的错觉。尤其当我们在做性能剖析的时候。
比如mysql的查询的时候，前10000次查询时间十几微秒，而后面两次是两秒，但是整体体现是仍然是十几微妙。当你的系统需要做优化的时候，采用平均值会导致这些错误藏而不见。

具体案例，sentinel。mysql。


